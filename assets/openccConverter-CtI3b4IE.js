let a,T=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});T.decode();let p=null;function h(){return(p===null||p.buffer!==a.memory.buffer)&&(p=new Uint8Array(a.memory.buffer)),p}function y(e,t){return T.decode(h().subarray(e,e+t))}let f=0,u=new TextEncoder("utf-8");const x=typeof u.encodeInto=="function"?function(e,t){return u.encodeInto(e,t)}:function(e,t){const n=u.encode(e);return t.set(n),{read:e.length,written:n.length}};function g(e,t,n){if(n===void 0){const i=u.encode(e),d=t(i.length);return h().subarray(d,d+i.length).set(i),f=i.length,d}let r=e.length,c=t(r);const o=h();let s=0;for(;s<r;s++){const i=e.charCodeAt(s);if(i>127)break;o[c+s]=i}if(s!==r){s!==0&&(e=e.slice(s)),c=n(c,r,r=s+e.length*3);const i=h().subarray(c+s,c+r),d=x(e,i);s+=d.written}return f=s,c}let l=null;function b(){return(l===null||l.buffer!==a.memory.buffer)&&(l=new Int32Array(a.memory.buffer)),l}class m{static __wrap(t){const n=Object.create(m.prototype);return n.ptr=t,n}free(){const t=this.ptr;this.ptr=0,a.__wbg_converter_free(t)}async convert(t){try{const s=a.__wbindgen_export_2.value-16;a.__wbindgen_export_2.value=s;var n=g(t,a.__wbindgen_malloc,a.__wbindgen_realloc),r=f;a.converter_convert(s,this.ptr,n,r);var c=b()[s/4+0],o=b()[s/4+1];return y(c,o)}finally{a.__wbindgen_export_2.value+=16,a.__wbindgen_free(c,o)}}delete(){a.converter_delete(this.ptr)}}class w{static __wrap(t){const n=Object.create(w.prototype);return n.ptr=t,n}free(){const t=this.ptr;this.ptr=0,a.__wbg_converterbuild_free(t)}static new(){var t=a.converterbuild_new();return w.__wrap(t)}adddict(t){var n=g(t,a.__wbindgen_malloc,a.__wbindgen_realloc),r=f;a.converterbuild_adddict(this.ptr,n,r)}group(){a.converterbuild_group(this.ptr)}build(){var t=a.converterbuild_build(this.ptr);return m.__wrap(t)}}async function W(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(r){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}async function P(e){const t={};t.wbg={},t.wbg.__wbindgen_throw=function(c,o){throw new Error(y(c,o))};const{instance:n,module:r}=await W(await e,t);return a=n.exports,P.__wbindgen_wasm_module=r,a}const _={opencc_wasm:"https://cdn.jsdelivr.net/gh/polyproline/opencc-wasm@main/opencc_gc.wasm",HKVariants:"https://cdn.jsdelivr.net/npm/opencc-data/data/HKVariants.txt",HKVariantsRev:"https://cdn.jsdelivr.net/npm/opencc-data/data/HKVariantsRev.txt",HKVariantsRevPhrases:"https://cdn.jsdelivr.net/npm/opencc-data/data/HKVariantsRevPhrases.txt",JPShinjitaiCharacters:"https://cdn.jsdelivr.net/npm/opencc-data/data/JPShinjitaiCharacters.txt",JPShinjitaiPhrases:"https://cdn.jsdelivr.net/npm/opencc-data/data/JPShinjitaiPhrases.txt",JPVariants:"https://cdn.jsdelivr.net/npm/opencc-data/data/JPVariants.txt",JPVariantsRev:"https://cdn.jsdelivr.net/npm/opencc-data/data/JPVariantsRev.txt",STCharacters:"https://cdn.jsdelivr.net/npm/opencc-data/data/STCharacters.txt",STPhrases:"https://cdn.jsdelivr.net/npm/opencc-data/data/STPhrases.txt",TSCharacters:"https://cdn.jsdelivr.net/npm/opencc-data/data/TSCharacters.txt",TSPhrases:"https://cdn.jsdelivr.net/npm/opencc-data/data/TSPhrases.txt",TWPhrasesIT:"https://cdn.jsdelivr.net/npm/opencc-data/data/TWPhrasesIT.txt",TWPhrasesName:"https://cdn.jsdelivr.net/npm/opencc-data/data/TWPhrasesName.txt",TWPhrasesOther:"https://cdn.jsdelivr.net/npm/opencc-data/data/TWPhrasesOther.txt",TWPhrasesRev:"https://cdn.jsdelivr.net/npm/opencc-data/data/TWPhrasesRev.txt",TWVariants:"https://cdn.jsdelivr.net/npm/opencc-data/data/TWVariants.txt",TWVariantsRev:"https://cdn.jsdelivr.net/npm/opencc-data/data/TWVariantsRev.txt",TWVariantsRevPhrases:"https://cdn.jsdelivr.net/npm/opencc-data/data/TWVariantsRevPhrases.txt"},j={ToTaiwan:[["STPhrases","STCharacters"],"TWVariants",["TWPhrasesIT","TWPhrasesName","TWPhrasesOther"]]},S=j.ToTaiwan;let v=null;async function R(){const e=await fetch(_.opencc_wasm);await P(e);const t=w.new();for(let n of S){if(Array.isArray(n))for(let r of n)t.adddict(await fetch(_[r]).then(c=>c.text()));else t.adddict(await fetch(_[n]).then(r=>r.text()));t.group()}v=t.build()}function V(){if(!v)throw new Error("You must call and await initOpenccRust() first.");return v}await R();const C=V();async function A(e){return await C.convert(e)}export{A as convertWithOpenCC};
